@include critical {
    .grid {
        $self: &;
        padding-right: ceil(($gutter-width / 2));
        padding-left: floor(($gutter-width / 2));
        width: breakpoint(desktop);
        max-width: 96vw;

        .row {
            @extend %flex;
            @extend %flex--row;
            @extend %flex--wrap;
            @extend %flex--justify-flex-start;
            @extend %flex--align-flex-start;
    
            width: 100%;
            margin-right: floor(($gutter-width / -2));
            margin-left: ceil(($gutter-width / -2));

            @for $c from 1 through ($grid-columns - 1) {
                &--push-#{$c} {
                    padding-left: $c * $col-width;
                }
            }
        }

        .col {
            padding-right: ($gutter-width / 2);
            padding-left: ($gutter-width / 2);
            width: $col-width;
            flex-basis: $col-width;

            @for $c from $grid-columns through 1 {
                $curr-col-width: $c * $col-width;
                $curr-col-ratio: $col-width / $curr-col-width;

                &--push-#{$c} {
                    margin-left: $c * $col-width;
                }

                &--#{$c} {
                    flex-basis: $curr-col-width;
                    width: $curr-col-width;

                    @for $n from $c through 1 {
                        $sub-col-width: percentage($curr-col-ratio * $n);
                        .col--#{$n} {
                            flex-basis: $sub-col-width;
                            width: $sub-col-width;
                        }
                    }  
                }

            }
        }
    }
}